<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="http://d3js.org/d3.v2.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
        <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
        <script src="js/streamgraph.js" type="text/javascript"></script>
        <style>
            body {
                font: 10px sans-serif;
            }
            #chart { 
                background: #fff;
            }
            p {
                font: 12px helvetica;
            }
            .axis path, .axis line {
                fill: none;
                stroke: #000;
                stroke-width: 2px;
                shape-rendering: crispEdges;
            }
            button {
                position: absolute;
                right: 50px;
                top: 10px;
            }
        </style>
    </head>
    <body>
        <div class="pull-right">
            <select class="form-control" id="movie-list">
            </select>
        </div>
        <div id="chart">
            <script type="text/javascript">
                chart("data/data.csv", "orange");
            </script>
        </div>
        <center>
            <iframe id="movie-video" width="560" height="315" src="https://www.youtube.com/embed/OiTiKOy59o4" frameborder="0" allowfullscreen></iframe>
        </center>
    </body>
    <script type="text/javascript">
        $.getJSON("json/movieList.json", function (json) {
            selector = $("#movie-list");
            for(var key in json){
                if(json.hasOwnProperty(key)){
                    var movie =json[key];
                    selector.append("<option value="+movie["file"]+"-"+movie["color"]+"-"+movie["video"]+">"+key+"</option>");
                }
            }
        })
        $("#movie-list").on('change', function(){
            var newMovie = $(this).val().split("-");
            chart("data/"+newMovie[0], newMovie[1]);
            $("#movie-video").attr("src", newMovie[2]);
        });

    </script>
</html>